<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VPLY CENTRE - Stock & Billing</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <h1>VPLY CENTRE</h1>

    <!-- MAIN DASHBOARD -->
    <div class="container" id="mainDashboard">
        
        <h2>Dashboard</h2>
        
        <div class="dashboard-card">
            <h3>Add New Stock</h3>
            <label>Category</label>
            <select id="category" onchange="updateFields()">
                <option>Plywood</option>
                <option>Door</option>
                <option>HDMR</option>
                <option>Bison Board</option>
            </select>

            <label>Brand</label>
            <select id="brand">
                <option>Century Club Prime</option>
                <option>VPlatinum</option>
                <option>Green Ply</option>
                <option>Mikasa Ply</option>
                <option>Sainik</option>
                <option>Pine Door</option>
                <option>Marine Door</option>
                <option>Green Door</option>
                <option>HDMR Board</option>
                <option>Bison Panel</option>
            </select>

            <div class="row-flex">
                <div class="full-width">
                    <label>Thickness</label>
                    <select id="thickness"></select>
                </div>
                <div class="full-width">
                    <label>Size</label>
                    <select id="size"></select>
                </div>
            </div>

            <label>Quantity</label>
            <input type="number" id="qty" placeholder="Enter Qty">

            <button onclick="saveStock()">Add to Stock</button>
        </div>

        <div class="dashboard-card">
            <h3>Quick Actions</h3>
            <button class="secondary" onclick="showStock()">View Current Stock</button>
            <button onclick="showBilling()">Make New Bill</button>
            <button class="secondary" onclick="showBills()">Previous Bills</button>
        </div>

        <div class="dashboard-card">
            <h3>Data Management</h3>
            <label>Upload Excel Stock</label>
            <input type="file" onchange="handleExcelUpload(event)">
        </div>

    </div>

    <!-- STOCK DASHBOARD -->
    <div class="container" id="stockDashboard" style="display:none">
        
        <h2>Current Stock</h2>
        
        <input type="text" id="searchBrand" placeholder="Search by Brand..." onkeyup="searchStock()">
        
        <div id="alertBox"></div>

        <div class="table-wrapper">
            <table id="stockTable"></table>
        </div>

        <div class="row-flex mt-10">
            <button class="secondary" onclick="renderStock()">Refresh</button>
            <button onclick="goBack()">Back to Dashboard</button>
        </div>

    </div>

    <!-- BILLING DASHBOARD -->
    <div class="container" id="billingDashboard" style="display:none">
        
        <h2>Create Bill</h2>

        <div class="dashboard-card">
            <label>Party Name</label>
            <input type="text" id="partyName" placeholder="Enter Customer Name">

            <label>WhatsApp Number</label>
            <input type="text" id="whatsappNumber" placeholder="91XXXXXXXXXX (No spaces)">
        </div>

        <div class="dashboard-card">
            <h3>Add Items to Bill</h3>
            
            <label>Select Item From Stock</label>
            <select id="billStock"></select>

            <div class="row-flex">
                <div class="full-width">
                    <label>Quantity</label>
                    <input type="number" id="billQty" placeholder="Qty">
                </div>
                <div class="full-width">
                    <label>Rate Type</label>
                    <select id="rateType">
                        <option value="sqft">Per Sq. Ft</option>
                        <option value="sqm">Per Sq. Meter</option>
                        <option value="pcs">Per Piece</option> 
                    </select>
                </div>
            </div>

            <label>Rate (Price)</label>
            <input type="number" id="rate" placeholder="Enter Rate">
            
            <button class="secondary" onclick="addToCart()">+ Add Item</button>
        </div>

        <!-- Cart Section -->
        <div class="dashboard-card">
            <h3>Bill Items</h3>
            <div class="table-wrapper">
                <table id="cartTable">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Qty</th>
                            <th>Amount</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="cartBody"></tbody>
                </table>
            </div>
            <div style="text-align: right; margin-top: 10px; font-weight: bold;">
                 Subtotal: Rs. <span id="cartSubtotal">0</span>
            </div>
        </div>

        <div class="dashboard-card">
            <h3>Final Adjustments</h3>
            <label>
                <input type="checkbox" id="gstCheck" style="width:auto; margin-right:10px;"> Add GST 18%
            </label>

            <div class="row-flex">
                <div class="full-width">
                    <label>Carriage</label>
                    <input type="number" id="carriage" value="0">
                </div>
                <div class="full-width">
                    <label>Unloading</label>
                    <input type="number" id="unloading" value="0">
                </div>
            </div>

            <label>Discount (%)</label>
            <input type="number" id="discount" value="0">

            <button onclick="generateBill()">Generate Final Bill</button>
            <button class="secondary" onclick="goBackFromBill()">Cancel / Back</button>
        </div>

        <div id="billOutput"></div>

    </div>

    <!-- PREVIOUS BILLS DASHBOARD -->
    <div class="container" id="billsDashboard" style="display:none">
        
        <h2>Bill History</h2>

        <div class="table-wrapper">
            <table id="billsTable"></table>
        </div>

        <button onclick="backFromBills()">Back to Dashboard</button>

    </div>

    <script src="script.js"></script>
</body>
</html>
